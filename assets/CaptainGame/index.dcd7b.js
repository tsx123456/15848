System.register("chunks:///_virtual/CaptainCardAni.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CaptainRunItem.ts","./CaptainProxy.ts"],(function(t){var i,n,e,r,s,o,a,h,d,u,l,g,p,c,C,f,v;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,r=t.assertThisInitialized,s=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy,a=t._decorator,h=t.Prefab,d=t.Node,u=t.instantiate,l=t.v3,g=t.UITransform,p=t.tween,c=t.Component},function(t){C=t.default},function(t){f=t.default,v=t.CaptainGameEvent}],execute:function(){var _,x,m,y,P,S,b,A,L,w;o._RF.push({},"59abcVurnJGsZQ/hG70HVLA","CaptainCardAni",void 0);var H=a.ccclass,I=a.property,N=a.menu,R=0,O=1,T=2,z=3,E=4;t("default",(_=H("CaptainCardAni"),x=N("game/Captain/CaptainCardAni"),m=I(h),y=I(d),_(P=x((b=i((S=function(t){function i(){for(var i,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s))||this,e(i,"pre_card",b,r(i)),e(i,"node_light",A,r(i)),e(i,"stepHeight",L,r(i)),e(i,"col",w,r(i)),i.runningCard=[],i.moveOut=100,i.delayTime=0,i.moveStep=60,i.finishCallBack=null,i._state=R,i.result=void 0,i.leftResultCount=3,i.endNode=void 0,i.endIndex=3,i.fixStep=void 0,i._index=0,i.next=void 0,i._hideArr=[],i._startPosArr=[],i._lightTime=0,i._scatteNum=0,i._xList=[-294,-147,0,147,294],i.priority=90,i}n(i,t);var o=i.prototype;return o.onLoad=function(){},o.setData=function(t){this._index=t.index;for(var i=0;i<5;i++){var n=u(this.pre_card);this.node.parent.addChild(n),n.setPosition(l(this._xList[this._index],294-147*i));var e=n.getComponent(C);e.col=this.col,this.runningCard.push(e)}this.node_light.active=!1,this.node_light.getComponent(g).priority=8,this.initEvent()},o.initPos=function(){for(var t=0;t<5;t++){var i=(this.endIndex+t+2)%5;this.runningCard[i].node.setPosition(l(this._xList[this._index],294-147*t))}},o.initCard=function(t){if(void 0===t&&(t=null),t)for(var i=0;i<this.runningCard.length;i++){var n=t[i];this.runningCard[i].setCard(n,!1,!1,!0),0==this.runningCard[i].node.getComponent(C)._index||7==this.runningCard[i].node.getComponent(C)._index||8==this.runningCard[i].node.getComponent(C)._index?this.runningCard[i].node.getComponent(g).priority=100+i:this.runningCard[i].node.getComponent(g).priority=0}else for(var e,r=s(this.runningCard);!(e=r()).done;){var o=e.value;this.randCard(o)}},o.showScatter=function(){for(var t,i=s(this.runningCard);!(t=i()).done;){t.value.showScatter()}},o.start=function(){},o.initEvent=function(){},o.removeEvent=function(){},o.onDestroy=function(){this.removeEvent()},o.randCard=function(t){t.randCard()},o.resultCard=function(t){if(this.leftResultCount>0){this.leftResultCount--;var i=this.result[this.leftResultCount];t.setCard(i,!0,!0)}else if(null!=this.next){var n=this.next;t.setCard(n,!0,!0)}},o.getLightStatue=function(){return this.node_light.active},o.showLight=function(){this.node_light.active=!0},o.showResult=function(t,i,n){if(void 0===i&&(i=!1),this.next=null,i)for(var e=0;e<3;e++){var r=this.endIndex+e-2;r<0&&(r=5+r),this.runningCard[r].setCard(t[e],!0,!0)}else this.result=t,this.setState(z);this._scatteNum=n},o.showNext=function(t,i){void 0===i&&(i=null),this._hideArr.sort(),this._hideArr.reverse(),this._startPosArr=[];for(var n,e=s(this.runningCard);!(n=e()).done;){var r=n.value;this._startPosArr.push(r.node.getPosition().y)}for(var o=0;o<this._hideArr.length;o++)for(var a=this._hideArr[o]+o,h=3+a,d=0;d<h;d++){var u=this.endIndex+a-2;u<0&&(u=5+u),this.runningCard[u].node.setPosition(l(this._xList[this._index],this.runningCard[u].node.getPosition().y+this.stepHeight)),a--}for(var c=0;c<t.length;c++){var _=this.endIndex-c;_<0&&(_=5+_),this.runningCard[_].setCard(t[c],!1,!0)}if(null!=i){var x=this.endIndex-3;x<0&&(x=5+x),this.runningCard[x].setCard(i,!1,!0)}this.show();for(var m=0;m<5;m++){var y=this.runningCard[m].node;y.getPosition().y!=this._startPosArr[m]&&(0==y.getComponent(C)._index||7==y.getComponent(C)._index||8==y.getComponent(C)._index?y.getComponent(g).priority=this.priority+m:y.getComponent(g).priority=0,p(y).delay(.3-.08*this._index).to(.6,{position:l(y.position.x,this._startPosArr[m])},{easing:"bounceOut"}).start())}f.emit(v.SHOW_SMOKE),this._hideArr=[]},o.setNext=function(t){this.next=t},o.show=function(){for(var t,i=s(this.runningCard);!(t=i()).done;){t.value.node.active=!0}},o.hide=function(t){var i=this.endIndex+t-2;i<0&&(i=5+i),this.runningCard[i].node.active=!1,this._hideArr.push(t)},o.clear=function(){this.leftResultCount=3,this.endNode=null,this.moveStep=80,this._hideArr=[]},o.run=function(t){void 0===t&&(t=0),this.clear(),this.initPos(),this.show(),this.delayTime=t,this.setState(O)},o.setState=function(t){if(this._state=t,t==T||t==z)for(var i,n=s(this.runningCard);!(i=n()).done;){i.value.setState(t)}},o.update=function(t){var i=this;switch(this._state){case O:this.delayTime-=t,this.delayTime<=0&&this.setState(T);break;case T:for(var n=this.runningCard.length,e=0;e<n;e++){var r=this.runningCard[e].node;r.setPosition(this._xList[this._index],r.getPosition().y-this.moveStep),r.getPosition().y<-(this.stepHeight+this.moveOut)&&(r.setPosition(this._xList[this._index],r.getPosition().y+5*this.stepHeight),this.randCard(this.runningCard[e]))}break;case z:this.moveStep-=2,this.moveStep<40&&(this.moveStep=40);for(var s=this.runningCard.length,o=0;o<s;o++){var a=this.runningCard[o].node;a.setPosition(this._xList[this._index],a.getPosition().y-this.moveStep),a.getPosition().y<-(this.stepHeight+this.moveOut)&&(a.setPosition(this._xList[this._index],a.getPosition().y+5*this.stepHeight),this.resultCard(this.runningCard[o]),2==this.leftResultCount&&(this.endNode=a,this.endIndex=o)),a==this.endNode&&a.getPosition().y<=-this.stepHeight-14&&(this.setState(E),this.fixStep=a.getPosition().y+this.stepHeight+14)}break;case E:for(var h=this.runningCard.length,d=function(t){var n=i.runningCard[t].node,e=n.getPosition().y-i.fixStep+12;p(n).to(.01,{position:l(n.position.x,e)}).call((function(){i.node_light.active=!1,0==n.getComponent(C)._index||7==n.getComponent(C)._index||8==n.getComponent(C)._index?n.getComponent(g).priority=100+t:n.getComponent(g).priority=0,i._scatteNum>=2&&f.emit(v.SHOW_LIGHT,{index:i._index+1})})).start()},u=0;u<h;u++)d(u);this.setState(R)}},i}(c)).prototype,"pre_card",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(S.prototype,"node_light",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(S.prototype,"stepHeight",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 147}}),w=i(S.prototype,"col",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=S))||P)||P));o._RF.pop()}}}));

System.register("chunks:///_virtual/CaptainDef.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./CaptainProxy.ts"],(function(n){var e,i,t,l,o;return{setters:[function(n){e=n.createForOfIteratorHelperLoose},function(n){i=n.cclegacy,t=n.AudioClip},function(n){l=n.default},function(n){o=n.default}],execute:function(){i._RF.push({},"7d82fq9XSRF8Zr3sZej8qLv","CaptainDef",void 0);var r=n("CaptainDef",function(){function n(){}return n.palyAudio=function(n,e){void 0===e&&(e=null);var i="sound/"+n;o.bundle.load(i,t,(function(n,i){if(n&&console.log(n),e){var t=l.instance.playSound(i);e(t)}else l.instance.playOneShot(i)}))},n.palyMusic=function(n){var e="sound/"+n;o.bundle.load(e,t,(function(n,e){l.instance.playGameMusic(e,!0)}))},n.init=function(){},n.getRand=function(n){for(var i,t=this.rates[n],l=0,o=e(t);!(i=o()).done;){l+=i.value}for(var r=Math.round(Math.random()*l),s=t.length-1;s>=0;s--){var a=t[s];if(l-r<a)return s;l-=a}return Math.floor(Math.random()*this.cardlines[n].length)},n.randRusult=function(n,i){void 0===i&&(i=!1);var t=i?1.5:1;this.tryGold-=n*t;for(var l=[],o=0;o<3;o++)l[o]=this.cardlines[o][this.getRand(o)],l[o+3]=this.cardlines[o][this.getRand(o)],l[o+6]=this.cardlines[o][this.getRand(o)];for(var r,s=[this.getMultple(),this.getMultple(),this.getMultple()],a=0,u=this.checkPrize(l),p=u.prizeInfo,d=u.lines,g=e(p);!(r=g()).done;){a+=r.value.Odds*n/5*s[1]}return this.tryGold+=a,{openResult:{OpenNums:l,multiples:s},prizeInfo:p,prizeAmount:a,prizeIdx:d}},n.getMultple=function(){for(var n=[1,2,3,5,10,15],e=[30,15,10,6,3,2],i=0,t=0,l=e;t<l.length;t++){i+=l[t]}for(var o=0,r=Math.round(Math.random()*i),s=e.length-1;s>=0;s--){var a=e[s];if(i-r<a){o=n[s];break}i-=a}return o},n.checkPrize=function(n){for(var e=function(n,e){for(var i=null,t=0,l=n[t];1==l;)l=n[++t];for(var o=++t;o<3&&(n[o]==l||1==n[o]);o++)t++;return this.odds[l-1]&&3==t&&(i={Odds:this.odds[l-1],PrizeNum:'{"Num":'+t+',"Symbol":'+l+"}",PrizeType:e}),i},i=[],t=[],l=0;l<this.lines.length;l++){for(var o=this.lines[l],r=[],s=0,a=o.length;s<a;s++)r[s]=n[o[s]];var u=e(r,l);u&&(i.push(u),t.push(o))}return{prizeInfo:i,lines:t}},n}());r.audio={winStart:"prizeWinStart",bgmMg:"bgm_mg",bgmBonus:"bgm_bonus",LevelUp1:"multiplierLevelUp1",LevelUp2:"multiplierLevelUp1",LevelUp3:"multiplierLevelUp2",spinBtn:"spinBtn",spinReelQuickstop:"spinReelQuickstop",symbolWild:"symbolWild",symbolScatter:"symbolScatter",voxMgSmall01:"voxMgSmall01",voxMgSmall02:"voxMgSmall02",voxMgBig01:"voxMgBig01",voxMgBig02:"voxMgBig01",voxBonusSmall01:"voxBonusSmall01",voxBonusSmall02:"voxBonusSmall02",voxBonusBig01:"voxBonusBig01",voxBonusBig02:"voxBonusBig02",woodenWheel:"woodenWheel",prizeWinMultiply:"prizeWinMultiply",prizeTotalWin:"prizeTotalWin",prizeWinStart:"prizeWinStart",prizeMediumWinCounting:"prizeMediumWinCounting",prizeMediumWinCountingEnd:"prizeMediumWinCountingEnd",fsStart:"fsStart",fsNoWin:"fsNoWin",freespinWon:"freespinWon",fsGet:"fsGet",symbolFallSingleA:"symbolFallSingleA",symbolFallSingleB:"symbolFallSingleB",symbolFallSingleC:"symbolFallSingleC",transEnterBonus:"transEnterBonus",freespinStartBtn:"freespinStartBtn",freespinWheelPowerUp:"freespinWheelPowerUp",freespinRemaining:"freespinRemaining",bgmBigwin:"bgm_bigwin",bgmBigwinEnd:"bgm_bigwin_end",bgmTotalwin:"bgm_totalwin",bgmTotalwinEnd:"bgm_totalwin_end"},r.tryGold=1e8,r.odds={0:[50,250,2500],1:[20,100,1e3],2:[15,50,500],3:[10,25,200],4:[5,20,100],5:[4,15,75],6:[3,10,50]},r.rates=[[8,8,8,8,8,8,8,44],[8,8,8,8,8,8,8,44],[300,120,75,60,50,40,30,24]],r.oddsType={normal:[1,2,3,5],free:[3,6,9,15]},r.lines=[[5,6,7,8,9],[0,1,2,3,4],[10,11,12,13,14],[0,6,12,8,4],[10,6,2,8,14],[0,1,7,3,4],[10,11,7,13,14],[5,11,12,13,9],[5,1,2,3,9],[0,6,7,8,4],[10,6,7,8,14],[5,6,2,8,9],[5,6,12,8,9],[5,1,7,3,9],[5,11,7,13,9],[0,6,2,8,4],[10,6,12,8,14],[0,1,7,13,14],[10,11,7,3,4],[0,11,2,13,4]],r.cardlines=[[1,2,3,4,5,6,7,8],[1,2,3,4,5,6,7,8],[1,2,3,4,5,6,7,8]],i._RF.pop()}}}));

System.register("chunks:///_virtual/CaptainGame",["./CaptainCardAni.ts","./CaptainDef.ts","./CaptainRunItem.ts","./CaptainScene.ts","./CaptainView.ts","./CaptainWinItem.ts","./CaptainWindow.ts","./CaptainScrollView.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/CaptainRunItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CaptainDef.ts","./CaptainProxy.ts"],(function(e){var t,n,i,o,a,r,s,l,d,c,u,p,m,_,h,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,s=e.sp,l=e.Node,d=e.SpriteFrame,c=e.Sprite,u=e.UITransform,p=e.v3,m=e.Component},function(e){_=e.CaptainDef},function(e){h=e.default,f=e.CaptainGameEvent}],execute:function(){var v,C,w,y,b,g,A,L,S,x,I,R;a._RF.push({},"31933N29KFONaN1/ooddCPx","CaptainRunItem",void 0);var z=r.ccclass,k=r.property,D=r.menu,F=3;e("default",(v=z("CaptainRunItem"),C=D("game/Captain/CaptainRunItem"),w=k(s.Skeleton),y=k(s.Skeleton),b=k(l),g=k(d),v(A=C((S=t((L=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"node_wild",S,o(t)),i(t,"node_scatter",x,o(t)),i(t,"node_normal",I,o(t)),i(t,"frame_normal",R,o(t)),t._state=F,t._index=void 0,t.col=void 0,t}n(t,e);var a=t.prototype;return a.onLoad=function(){this.node_wild.node.active=!1,this.node_scatter.node.active=!1,this.node_normal.active=!0},a.setCard=function(e,t,n,i){var o=this;void 0===t&&(t=!0),this._index=e,7==e?(this.node_wild.node.active=!0,this.node_normal.active=!1,this.node_scatter.node.active=!1,this.scheduleOnce((function(){t&&(_.palyAudio(_.audio.symbolWild),o.node_wild.setAnimation(0,"spawn",!1),o.node_wild.setCompleteListener((function(){o.node_wild.setCompleteListener(null),o.node_wild.setAnimation(0,"idle",!0)})))}),.05)):8==e?(this.node_wild.node.active=!1,this.node_normal.active=!1,this.node_scatter.node.active=!0,this.node_scatter.getComponent(s.Skeleton).setAnimation(0,"idle",!0),this.scheduleOnce((function(){t&&(_.palyAudio(_.audio.symbolScatter),o.node_scatter.setAnimation(0,"spawn",!1),o.node_scatter.setCompleteListener((function(){o.node_scatter.setCompleteListener(null),o.node_scatter.setAnimation(0,"idle",!0)})))}),.05)):(this.node_wild.node.active=!1,this.node_normal.active=!0,this.node_scatter.node.active=!1,this.node_normal.getComponent(c).spriteFrame=this.frame_normal[e])},a.randCard=function(){var e=Math.floor(9*Math.random());7==e&&(e=1),this.setCard(e,!1)},a.setState=function(e){this._state=e},a.showScatter=function(){var e=this;8==this._index&&(this.node_scatter.setAnimation(0,"win",!1),this.node_scatter.setCompleteListener((function(){e.node_scatter.setCompleteListener(null),e.node_scatter.setAnimation(0,"idle",!0)})))},a.onClick=function(){h.emit(f.CLICK_ITEM,{index:this._index,pos:this.node.getComponent(u).convertToWorldSpaceAR(p(0,0)),col:this.col})},t}(m)).prototype,"node_wild",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(L.prototype,"node_scatter",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(L.prototype,"node_normal",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(L.prototype,"frame_normal",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=L))||A)||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/CaptainScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Common.ts","./ViewManager.ts","./MainManager.ts","./CaptainProxy.ts"],(function(n){var t,e,o,i,a,r,s,c,l,u,f,p,h;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,s=n.Prefab,c=n.instantiate,l=n.Component},function(n){u=n.Common},function(n){f=n.default},function(n){p=n.default},function(n){h=n.default}],execute:function(){var g,m,d,v,S,w;a._RF.push({},"6abe0QB0kdL6LrU69ipA83X","CaptainScene",void 0);var y=r.ccclass,C=r.menu,P=r.property,_=p.instance.getConfigManager(),b=p.instance.getEventManager();n("default",(g=y("CaptainScene"),m=C("game/Captain/CaptainScene"),d=P(s),g(v=m((w=t((S=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,o(t,"pre_room",w,i(t)),t.node_desk=null,t.node_room=null,t}e(t,n);var a=t.prototype;return a.onLoad=function(){this.init()},a.start=function(){var n=c(this.pre_room);this.node.addChild(n),u.updateProgress(1)},a.init=function(){},a.reset=function(){},a.gameShow=function(){u.closeWait(),this.init()},a.closePop=function(n){f.instance.closePopView()},a.onEnable=function(){h.registSocketEvent(),b.on(_.eventTransform.gameShow,this.gameShow,this),b.on(_.protocolHall.login,this.gameShow,this),b.on(_.ButtonEvent.closePop,this.closePop,this)},a.onDisable=function(){h.removeSocketEvent(),b.off(_.eventTransform.gameShow,this.gameShow,this),b.off(_.protocolHall.login,this.gameShow,this),b.off(_.ButtonEvent.closePop,this.closePop,this)},a.onDestroy=function(){},t}(l)).prototype,"pre_room",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=S))||v)||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/CaptainScrollView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GUtil.ts","./ConfigManager.ts","./EventManager.ts"],(function(e){var t,n,i,o,a,r,c,s,l,u,h,d,_,w,b,p,x,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,c=e.Enum,s=e.Node,l=e.instantiate,u=e.Label,h=e.ScrollView,d=e.Component,_=e.UITransform,w=e.v3,b=e.UIOpacity},function(e){p=e.default},function(e){x=e.default},function(e){m=e.default}],execute:function(){var V,f,S,I,g,y,C,v,T;a._RF.push({},"9e1eaWBko5JVb1kCowWcjAC","CaptainScrollView",void 0);var M=r.ccclass,L=r.property,R=(r.menu,r.inspector,c({baseScore:0,baseRate:1,basePay:2,baseBet:3}));e("default",(V=M("CaptainScrollView"),f=L({type:R}),S=L(),I=L(s),V((C=t((y=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"type",C,o(t)),i(t,"itemCounts",v,o(t)),i(t,"item",T,o(t)),t._ScrollViewView=null,t._curIndex=0,t._maxIndex=0,t._hTouch=null,t._isLongTouch=!1,t._data=void 0,t.isSetNew=!1,t}n(t,e);var a=t.prototype;return a.onDisable=function(){this._hTouch&&clearTimeout(this._hTouch)},a.setData=function(e){var t=this;switch(this._data=e,this.type){case R.baseScore:this._curIndex=e._curBetListIndex,this.itemCounts=e.betList.length;break;case R.baseRate:this._curIndex=e._curBetCount,this.itemCounts=e.betMaxCount;break;case R.basePay:this._curIndex=0;break;case R.baseBet:this._curIndex=e._curBetListIndex*e.betMaxCount+e._curBetCount,this.itemCounts=e.betMaxCount*e.betList.length}this._maxIndex=this.itemCounts-1;for(var n=0;n<this.itemCounts;n++){var i=this._ScrollViewView.content.children[n];i||(i=l(this.item),this._ScrollViewView.content.addChild(i)),i.active=!0,i.name="item_"+n,i.getComponent(u).string=this.getDefaultValue(n)}this._ScrollViewView.node.on("touch-up",(function(){t.onScrollTouchUp()}),this),this._ScrollViewView.node.on("touchcancel",(function(){t.onScrollTouchUp()}),this);var o=function(){for(var e=0;e<t._ScrollViewView.content.children.length;e++){var n=t._ScrollViewView.content.children[e],i=n.getComponent(_).convertToWorldSpaceAR(w(0,0));i=t._ScrollViewView.node.getComponent(_).convertToNodeSpaceAR(i);var o=t._ScrollViewView.node.getComponent(_).height/2;Math.abs(i.y)<o?(n.getComponent(b).opacity=255*(1-Math.abs(i.y)/o),Math.abs(i.y)<n.getComponent(_).height?n.scale=w(1+.5*(1-Math.abs(i.y)/n.getComponent(_).height),1+.5*(1-Math.abs(i.y)/n.getComponent(_).height)):n.scale=w(1,1,1)):(n.getComponent(b).opacity=0,n.scale=w(1,1,1)),n.scale.x>1.25&&t._curIndex!=e&&(t._curIndex=e,t.isSetNew||m.getInstance().emit(x.getInstance().eventTransform.setBase,t.type,t._curIndex))}};this._ScrollViewView.node.on("scroll-ended",(function(){o(),t.isSetNew=!1}),this),this._ScrollViewView.node.on("scrolling",o,this)},a.onLoad=function(){this._ScrollViewView=this.node.getComponent(h)},a.start=function(){var e=this;setTimeout((function(){e._ScrollViewView&&e._ScrollViewView.scrollToPercentVertical((e._maxIndex-e._curIndex)/e._maxIndex,1e-4)}),300)},a.onScrollTouchUp=function(e){var t=this;void 0===e&&(e=.5),this.scheduleOnce((function(){var e=t._ScrollViewView.getScrollOffset();t._curIndex=Math.round(Math.abs(e.y)/76),t._ScrollViewView.stopAutoScroll(),t._curIndex=t._curIndex<0?0:t._curIndex>t._maxIndex?t._maxIndex:t._curIndex,t._ScrollViewView.scrollToPercentVertical((t._maxIndex-t._curIndex)/t._maxIndex,.1)}),e)},a.setNewPos=function(e){this._curIndex!=e&&(this._curIndex=e,this.isSetNew=!0,this._ScrollViewView.scrollToPercentVertical((this._maxIndex-this._curIndex)/this._maxIndex,.1))},a.doReset=function(){this._curIndex=0,this._ScrollViewView.scrollToPercentVertical((this._maxIndex-this._curIndex)/this._maxIndex,1e-4)},a.getDefaultValue=function(e){switch(this.type){case R.baseScore:var t=this._data.betList[e];return p.numberFormat(t,2)+"K";case R.baseRate:return""+(e+1);case R.basePay:return""+(e+1)*this._data.betRate;case R.baseBet:var n=Math.floor(e/10),i=this._data.betList[n],o=e%10;return p.numberFormat(i*(o+1)*this._data.betRate,2)+"K"}},a.getValue=function(e){switch(this.type){case R.baseScore:return this._data.betList[e];case R.baseRate:return e+1;case R.basePay:return(e+1)*this._data.betRate;case R.baseBet:var t=Math.floor(e/10);return this._data.betList[t]*(e%10+1)*this._data.betRate}},t}(d)).prototype,"type",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.baseScore}}),v=t(y.prototype,"itemCounts",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=t(y.prototype,"item",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=y))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/CaptainView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./I18n.ts","./Common.ts","./ViewManager.ts","./ScrollNumLabel.ts","./DataManager.ts","./ProxyMgr.ts","./MainManager.ts","./FortuneSetBase.ts","./FortuneHistory.ts","./FortuneRank.ts","./FortuneSetAuto.ts","./NetManager.ts","./CaptainWindow.ts","./CaptainCardAni.ts","./CaptainWinItem.ts","./CaptainDef.ts","./LineSprite.ts","./AudioManager.ts","./LocalizedImage.ts","./GameDef.ts","./CaptainProxy.ts"],(function(t){var e,i,n,o,r,a,s,u,l,h,c,_,m,d,f,g,p,b,y,B,v,C,w,x,A,N,T,L,k,S,I,F,z,M,D,W,O,E,R,P,H,U,G,V,K,q,Q;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,s=t._decorator,u=t.Node,l=t.Prefab,h=t.sp,c=t.Label,_=t.SpriteFrame,m=t.v3,d=t.tween,f=t.sys,g=t.find,p=t.UIOpacity,b=t.instantiate,y=t.Tween,B=t.Sprite,v=t.UITransform,C=t.color,w=t.Color,x=t.Component},function(t){A=t.default},function(t){N=t.Common},function(t){T=t.default},function(t){L=t.default},function(t){k=t.default,S=t.UserKey},function(t){I=t.default},function(t){F=t.default},function(t){z=t.default},function(t){M=t.default},function(t){D=t.default},function(t){W=t.default},function(t){O=t.default},function(t){E=t.default},function(t){R=t.default},function(t){P=t.default},function(t){H=t.CaptainDef},function(t){U=t.LineSprite},function(t){G=t.default},function(t){V=t.LocalizedImage},function(t){K=t.GameDef},function(t){q=t.default,Q=t.CaptainGameEvent}],execute:function(){var X,Y,j,J,Z,$,tt,et,it,nt,ot,rt,at,st,ut,lt,ht,ct,_t,mt,dt,ft,gt,pt,bt,yt,Bt,vt,Ct,wt,xt,At,Nt,Tt,Lt,kt,St,It,Ft,zt,Mt,Dt,Wt,Ot,Et,Rt,Pt,Ht,Ut,Gt,Vt,Kt,qt,Qt,Xt,Yt,jt,Jt,Zt,$t,te,ee,ie,ne,oe,re,ae,se,ue,le,he,ce,_e,me,de,fe,ge,pe,be,ye,Be,ve,Ce,we,xe,Ae,Ne,Te,Le,ke,Se,Ie,Fe,ze,Me,De,We,Oe,Ee,Re,Pe,He,Ue,Ge,Ve,Ke,qe,Qe,Xe,Ye;a._RF.push({},"73164qaqJZLgqKBgnKDOyqy","CaptainView",void 0);var je=F.instance.getConfigManager(),Je=F.instance.getEventManager(),Ze=s.ccclass,$e=s.property,ti=s.menu,ei=0,ii=1,ni=2,oi=3,ri=4,ai=5,si=6,ui=7,li=8,hi=9,ci=10,_i=.5,mi=1.5;t("CaptainView",(X=Ze("CaptainView"),Y=ti("game/Captain/CaptainView"),j=$e(u),J=$e(u),Z=$e(l),$=$e(h.Skeleton),tt=$e(u),et=$e(h.Skeleton),it=$e(c),nt=$e(L),ot=$e(c),rt=$e(u),at=$e(u),st=$e(u),ut=$e(c),lt=$e(u),ht=$e(L),ct=$e(c),_t=$e(h.Skeleton),mt=$e(_),dt=$e(u),ft=$e(l),gt=$e(u),pt=$e(R),bt=$e(u),yt=$e(u),Bt=$e(h.Skeleton),vt=$e(h.Skeleton),Ct=$e(h.Skeleton),wt=$e(c),xt=$e(h.Skeleton),At=$e(u),Nt=$e(h.Skeleton),Tt=$e(L),Lt=$e(u),kt=$e(h.Skeleton),St=$e(c),It=$e(u),Ft=$e(h.Skeleton),zt=$e(L),Mt=$e(u),Dt=$e(u),Wt=$e(h.Skeleton),Ot=$e(c),Et=$e(c),Rt=$e(L),Pt=$e(c),Ht=$e(u),Ut=$e(u),Gt=$e(h.Skeleton),Vt=$e(u),Kt=$e(c),qt=$e(h.Skeleton),Qt=$e(u),Xt=$e(u),X(Yt=Y((Jt=e((jt=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"normal_btnBox",Jt,o(e)),n(e,"more_btnBox",Zt,o(e)),n(e,"prefab_winItem",$t,o(e)),n(e,"captain",te,o(e)),n(e,"ruber",ee,o(e)),n(e,"ruberBg",ie,o(e)),n(e,"txt_bet",ne,o(e)),n(e,"txt_win",oe,o(e)),n(e,"txt_gold",re,o(e)),n(e,"notice_content",ae,o(e)),n(e,"notice_title",se,o(e)),n(e,"notice_gain_one",ue,o(e)),n(e,"notice_gain_one_txt",le,o(e)),n(e,"notice_gain_all",he,o(e)),n(e,"notice_gain_all_txt",ce,o(e)),n(e,"notice_txt_odds",_e,o(e)),n(e,"notice_bg",me,o(e)),n(e,"turn_bg_list",de,o(e)),n(e,"turn_bg",fe,o(e)),n(e,"turn_prefab_window",ge,o(e)),n(e,"turn_node_line",pe,o(e)),n(e,"turn_aniLines",be,o(e)),n(e,"turn_node_spineParent",ye,o(e)),n(e,"turn_node_spineMask",Be,o(e)),n(e,"turn_spine_start",ve,o(e)),n(e,"turn_spine_smokes",Ce,o(e)),n(e,"turn_spine_smokes1",we,o(e)),n(e,"turn_auto_leftCount",xe,o(e)),n(e,"turn_bottomIntro",Ae,o(e)),n(e,"bigwin_bg",Ne,o(e)),n(e,"bigwin_sp",Te,o(e)),n(e,"bigwin_txt",Le,o(e)),n(e,"free_start",ke,o(e)),n(e,"free_start_intro",Se,o(e)),n(e,"free_start_time",Ie,o(e)),n(e,"free_win",Fe,o(e)),n(e,"free_win_intro",ze,o(e)),n(e,"free_winTxt",Me,o(e)),n(e,"free_winBtn",De,o(e)),n(e,"free_bottom",We,o(e)),n(e,"free_bottom_introl",Oe,o(e)),n(e,"free_bottom_time",Ee,o(e)),n(e,"txt_betFree",Re,o(e)),n(e,"txt_winFree",Pe,o(e)),n(e,"txt_goldFree",He,o(e)),n(e,"free_bg",Ue,o(e)),n(e,"free_bg1",Ge,o(e)),n(e,"free_captain",Ve,o(e)),n(e,"free_add",Ke,o(e)),n(e,"free_add_time",qe,o(e)),n(e,"spine_quick",Qe,o(e)),n(e,"startBtn",Xe,o(e)),n(e,"button_sound",Ye,o(e)),e._runDelay=.1,e._runTime=_i,e._state=ei,e._lock=!1,e._bet=2e3,e._auto=!1,e._autoTimes=0,e._showLineIndex=0,e._errCount=0,e._noticeIndex=0,e._noticeDelay=1,e._window=void 0,e._isFree=!1,e.freeLock=!1,e.freeTimeLeft=0,e._resultIndex=0,e._freeCount=0,e._oddType=20,e._odds=void 0,e._hasChangeSpeed=!1,e._scatteNum=0,e._isFromAutoToFree=!1,e._audioId=0,e._isEndBigWin=!1,e.bigWinTargetAnim=void 0,e.isWaitBet=!1,e.normalBtnBoxPos=void 0,e.moreBtnBoxPos=void 0,e.bottomBtnMoveDis=150,e}i(e,t);var a=e.prototype;return a.start=function(){this.onClickHTMLStartBtn=this.onClickHTMLStartBtn.bind(this),window.addEventListener("customEventFromHTML",this.onClickHTMLStartBtn)},a.onClickHTMLStartBtn=function(){var t=this;window.removeEventListener("customEventFromHTML",this.onClickHTMLStartBtn),this._init(),this.updateGoldData(),this.initEvent(),this.checkDownOrUpBet(),this.node.on(u.EventType.TOUCH_END,(function(){t.clickHideWindow()})),this.bigwin_bg.on(u.EventType.TOUCH_END,(function(){t._isEndBigWin?t.hideBigWin():(G.instance.stopSound(t._audioId),t.bigwin_txt.reset(q.result.prizeAmount),t._runTime=8,H.palyAudio(H.audio.bgmBigwinEnd),t.bigwin_sp.getCurrent(0).animation.name.startsWith(t.bigWinTargetAnim)||(t.bigwin_sp.setAnimation(0,t.bigWinTargetAnim+"intro",!1),t.bigwin_sp.addAnimation(0,t.bigWinTargetAnim+"idle",!0),"bigwin_"==t.bigWinTargetAnim?t.playTitleBigWinAnim():"megawin_"==t.bigWinTargetAnim?t.playTitleMegaWinAnim():"superwin_"==t.bigWinTargetAnim&&t.playTitleSuperMegaWinAnim()),t._isEndBigWin=!0)})),this.free_win.on(u.EventType.TOUCH_END,(function(){t.free_winBtn.active||(t.free_winTxt.reset(q.freeTotalWin),t.free_winBtn.setScale(m(.2,.2,1)),t.free_winBtn.active=!0,d(t.free_winBtn).to(.2,{scale:m(1,1,1)}).start())}))},a.updateBetAmountOption=function(){var t=k.instance.getUserDataForKey(S.CURRENCY_MULTIPLIER);q.betSizeList=[200,2e3,1e4].map((function(e){return e*t})),q.betLevelList=[1,2,3,4,5,6,7,8,9,10],q.betLinesList=[20],q.betAmountList=[],q.betAmountInfoList=[];for(var e=new Set,i=0;i<q.betSizeList.length;i++)for(var n=0;n<q.betLevelList.length;n++)for(var o=0;o<q.betLinesList.length;o++){var r=q.betSizeList[i]*q.betLevelList[n]*q.betLinesList[o];e.has(r)||(e.add(r),q.betAmountList.push(r),q.betAmountInfoList.push({betSizeIndex:i,betLevelIndex:n,betLinesIndex:o,betAmount:r}))}q.betAmountList.sort((function(t,e){return t-e})),q.betAmountInfoList.sort((function(t,e){return t.betAmount-e.betAmount}))},a.checkReady=function(){return this._state==ei||this._state==ui||this._state==ri},a.getVolume=function(){var t=f.localStorage.getItem("volume");return null===t?1:parseFloat(t)},a.updateButtonSound=function(){var t,e=f.localStorage.getItem("volume");t=null===e?1:parseFloat(e),g("icon/ic_soundon",this.button_sound).active=t>0,g("icon/ic_soundoff",this.button_sound).active=0==t,this.normal_btnBox.getChildByName("soundOffIcon").active=0==t},a._init=function(){var t=this.getVolume();G.instance.setVolume(t),this.updateButtonSound(),this.normalBtnBoxPos=this.normal_btnBox.position.clone(),this.moreBtnBoxPos=this.more_btnBox.position.clone(),this.more_btnBox.position=m(this.moreBtnBoxPos.x,this.moreBtnBoxPos.y-this.bottomBtnMoveDis,this.moreBtnBoxPos.z),this.more_btnBox.getComponent(p).opacity=0,this.normal_btnBox.active=!0,this.more_btnBox.active=!1,this.updateBetAmountOption(),this.txt_bet.string="",this.txt_betFree.string="",this.txt_win.setPrefix(k.instance.getUserDataForKey(S.CURRENCY_SYMBOL)),this.txt_winFree.setPrefix(k.instance.getUserDataForKey(S.CURRENCY_SYMBOL)),this.txt_win.reset(0),this.normal_btnBox.active=!0,this.more_btnBox.active=!1,this.turn_bottomIntro.node.active=!1;for(var e,i=this.turn_node_line.children,n=r(i);!(e=n()).done;){e.value.active=!1}var o=b(this.turn_prefab_window);this.node.addChild(o),this._window=o.getComponent(E),o.active=!1,this.updateInfo()},a.update=function(t){switch(this.freeLock&&(this.freeTimeLeft-=t,this.freeTimeLeft<=0&&!this.free_win.active?this.onClickEnterFreeScreen():this.freeTimeLeft<=0&&this.free_win.active&&(q.freeTotalWin=0,this.checkDownOrUpBet(),this.changeScene(!1,0,!0))),this.updateNotice(t),this._state){case ii:this._runTime-=t,this._runTime<=0&&(q.result?this.changeState(ni):(this._runTime=_i,this._errCount++,this._errCount>3&&this.sendBet()));break;case ni:this._runTime-=t,this._runTime<=0&&this.changeState(ei);break;case oi:this._runTime-=t,this._runTime<=0&&(this.updateGoldData(),this.changeBtnActive(!0),this._auto||this._isFree?this.changeState(ei):this.changeState(ri));break;case ai:this._runTime-=t,this._runTime<=0&&(G.instance.stopAllEffect(),this.bigwin_bg.active=!1,this._isEndBigWin=!1,this.bigwin_txt.reset(),this._isFree?this.showEnd():this.changeState(si));break;case si:this._runTime-=t,this._runTime<=0&&this.showEnd();break;case ei:this._auto&&!this._isFree&&q.result&&q.result.FreeInfo.Count>0&&!this._isFromAutoToFree?(this._isFromAutoToFree=!0,this.changeState(ui)):(this._auto||this._isFree)&&this.preStart();break;case ri:this._runTime-=t,this._runTime<=0&&(this._runTime=2,this._showLineIndex++);break;case ui:this._runTime-=t,this._runTime<=0&&this.changeState(ei)}},a.playTitleBigWinAnim=function(){var t=this.bigwin_bg.getChildByName("title");t.getComponent(V).key="win_big";var e=t.getComponent(p);e.opacity=0,y.stopAllByTarget(e),d(e).delay(1.2).to(.5,{opacity:255}).start()},a.playTitleMegaWinAnim=function(){var t=this.bigwin_bg.getChildByName("title");t.getComponent(V).key="win_meg",y.stopAllByTarget(t),d(t).to(.15,{scale:m(.679,.679,1)}).to(.3,{scale:m(1.197,1.197,1)}).to(.15,{scale:m(1,1,1)}).start()},a.playTitleSuperMegaWinAnim=function(){var t=this.bigwin_bg.getChildByName("title");t.getComponent(V).key="win_sup",y.stopAllByTarget(t),d(t).to(.15,{scale:m(.679,.679,1)}).to(.3,{scale:m(1.197,1.197,1)}).to(.15,{scale:m(1,1,1)}).start()},a.changeState=function(t){var e=this;switch(t){case ei:this._state=ei;break;case ni:this.onClickStop();break;case ii:this.preStart();break;case oi:this._state=oi,this._runTime=1,this.scheduleOnce((function(){e.showAward()}),.5);break;case ri:this._state=ri,this._runTime=2;break;case ui:this._state=ui,this._runTime=1;break;case hi:this._state=hi,this._runTime=1,this.scheduleOnce((function(){e.showNext()}),1.8);break;case ai:this._state=ai,this.bigwin_bg.active=!0,this._runTime=8;var i=q.result.prizeAmount/this._bet,n="bigwin_";this.bigwin_txt.stepCount=240,this.bigwin_sp.setStartListener((function(t){var i=t.animation.name;"bigwin_intro"==i?e.playTitleBigWinAnim():"megawin_intro"==i?e.playTitleMegaWinAnim():"superwin_intro"==i&&e.playTitleSuperMegaWinAnim()})),this.bigwin_sp.setAnimation(0,n+"intro",!1),i>=30&&(n="megawin_",this.bigwin_txt.stepCount=300,this._runTime=10,this.bigwin_sp.addAnimation(0,n+"intro",!1)),i>=50&&(n="superwin_",this.bigwin_txt.stepCount=360,this._runTime=12,this.bigwin_sp.addAnimation(0,n+"intro",!1)),this.bigWinTargetAnim=n,this.bigwin_txt.value=q.result.prizeAmount,this.bigwin_sp.setCompleteListener((function(t){(t.animation?t.animation.name:"").startsWith(n)&&(e.bigwin_sp.setCompleteListener(null),e.bigwin_sp.setAnimation(0,n+"idle",!0))})),H.palyAudio(H.audio.bgmBigwin,(function(t){e._audioId=t}));break;case si:this._state=si,this._runTime=mi;var o="normal_",r=q.result.prizeAmount/this._bet;r>=60?o="bigwin2_":r>=5&&(o="bigwin_"),this.notice_bg.setAnimation(0,o+"win",!1),this.notice_bg.addAnimation(0,o+"idle",!0);break;case li:this._state=li,this.free_winTxt.reset(),this._runTime=5,this.free_bottom.active=!1,this.turn_spine_start.node.active=!0,this.free_winBtn.active=!1,this.free_win.active=!0,this.freeLock=!0,this.clickHideWindow(),this.free_winTxt.stepCount=60,this.free_winTxt.value=q.freeTotalWin,this.txt_win.value=q.freeTotalWin,this.scheduleOnce((function(){e.free_winBtn.active||(e.free_winBtn.setScale(m(.2,.2,1)),e.free_winBtn.active=!0,d(e.free_winBtn).to(.2,{scale:m(1,1,1)}).start())}),1),this.free_win_intro.setAnimation(0,"intro",!1),this.free_win_intro.addAnimation(0,"idle",!0);var a=this.free_win.getChildByName("title").getComponent(p);a.opacity=0,y.stopAllByTarget(a),d(a).to(.5,{opacity:255}).start(),this.txt_winFree.reset(),H.palyAudio(H.audio.bgmTotalwin,(function(t){e._audioId=t,e.scheduleOnce((function(){G.instance.stopSound(t),H.palyAudio(H.audio.bgmTotalwinEnd,(function(t){e._audioId=t}))}),2)}));break;case ci:this._state=ci,this.free_add_time.string=q.result.FreeInfo.Count-this._freeCount+"",this.free_add.active=!0,d(this.free_add).to(.3,{scale:m(1.1,1.1,1)}).to(.1,{scale:m(1,1,1)}).delay(1).call((function(){e.free_add.active=!1,e._state=ui})).start(),this.setFreeCount(q.result.FreeInfo.Count)}},a.changeScene=function(t,e,i){var n=this;if(void 0===t&&(t=!0),void 0===e&&(e=0),void 0===i&&(i=!1),t){this.freeLock=!0,this.freeTimeLeft=12,this.free_bg.active=!0,this.free_bg1.active=!0,this.captain.node.active=!1,this.free_captain.node.active=!0,this.free_start.active=!0,this.clickHideWindow(),this.turn_bg.getComponent(B).spriteFrame=this.turn_bg_list[1],G.instance.stopAllEffect(),H.palyAudio(H.audio.transEnterBonus),this.free_start_time.node.active=!1,this.free_start.getChildByName("start").active=!1,this.free_start_intro.setAnimation(0,"intro",!1);var o=this.free_start.getChildByName("free_start_text").getComponent(p);o.opacity=0,y.stopAllByTarget(o),d(o).to(1,{opacity:255}).start(),this.scheduleOnce((function(){n.free_start_intro.setAnimation(0,"idle",!0),n._freeCount=e,n.free_start_time.node.active=!0,n.free_start_time.string=N.numFormat(n._freeCount+""),n.free_start.getChildByName("start").active=!0,n.ruber.getChildByName("normal").active=!1,n.ruber.getChildByName("free").active=!0,d(n.free_start_time.node).by(.05,{position:m(0,20)}).by(.05,{position:m(0,-20)}).start(),n.free_winTxt.value=n._freeCount,n.normal_btnBox.getChildByName("more").active=!1,n.more_btnBox.getChildByName("more").active=!1}),.8)}else this.turn_bg.getComponent(B).spriteFrame=this.turn_bg_list[0],this.freeLock=!1,this.free_bg.active=!1,this.free_bg1.active=!1,this.captain.node.active=!0,this.free_captain.node.active=!1,this.free_start.active=!1,this._freeCount=e,this.ruber.getChildByName("normal").active=!0,this.ruber.getChildByName("free").active=!1,this.free_winTxt.value=this._freeCount,this._isFree=!1,this.free_win.active=!1,this.free_bottom.active=!1,this.turn_spine_start.node.active=!0,this.normal_btnBox.getChildByName("more").active=!0,this.more_btnBox.getChildByName("more").active=!0,i&&(H.palyMusic(H.audio.bgmMg),this._odds=H.oddsType.normal,this.initGun(),this.changeState(ei))},a.getWinIconAnim=function(){this.turn_node_spineMask.active=!1;for(var t=0;t<this.turn_aniLines.length;t++){Math.random()<.5?d(this.turn_aniLines[t].node).by(.1,{position:m(3,0,0)}).by(.1,{position:m(-3,0,0)}).by(.1,{position:m(0,3,0)}).by(.1,{position:m(0,-3,0)}).by(.1,{position:m(-3,0,0)}).by(.1,{position:m(3,0,0)}).by(.1,{position:m(0,-3,0)}).by(.1,{position:m(0,3,0)}).by(.1,{position:m(0,0,0)}).start():d(this.turn_aniLines[t].node).by(.1,{position:m(0,3,0)}).by(.1,{position:m(0,-3,0)}).by(.1,{position:m(3,0,0)}).by(.1,{position:m(-3,0,0)}).by(.1,{position:m(0,-3,0)}).by(.1,{position:m(0,3,0)}).by(.1,{position:m(-3,0,0)}).by(.1,{position:m(3,0,0)}).start()}},a.setFreeCount=function(t){var e=this;this._freeCount=t,H.palyAudio(H.audio.freespinRemaining),this._freeCount>=1?(d(this.free_bottom_time.node).by(.1,{position:m(0,20,0)}).by(.1,{position:m(0,-20,0)}).start(),d(this.free_bottom_time.node).to(.1,{scale:m(1.2,1.2,1.2)}).to(.1,{scale:m(1,1,1)}).start(),this.free_bottom.active&&(this.free_bottom_introl.node.active=!0,this.free_bottom_introl.setAnimation(0,"spin",!1),this.free_bottom_introl.setCompleteListener((function(t){e.free_bottom_introl.setCompleteListener(null),e.free_bottom_introl.setAnimation(0,"idle",!0)}))),this.free_bottom.getChildByName("node_lastOne").active=!1,this.free_bottom.getChildByName("node_notLastOne").active=!0,this.free_bottom_time.string=N.numFormat(this._freeCount+"")):(this.free_bottom.getChildByName("node_notLastOne").active=!1,this.free_bottom.getChildByName("node_lastOne").active=!0)},a.onClickEnterFreeScreen=function(){var t=this;this.free_start.active=!1,this.free_bottom.active=!0,this.turn_spine_start.node.active=!1,this.changeState(ui),this._runTime=1.2,this._isFree=!0,H.palyMusic(H.audio.bgmBonus),H.palyAudio(H.audio.freespinStartBtn),G.instance.stopAllEffect(),this._audioId=0,this.scheduleOnce((function(){H.palyAudio(H.audio.freespinWheelPowerUp)}),.1),this._odds=H.oddsType.free,this.freeLock=!1,this.freeTimeLeft=12,this.ruberBg.setAnimation(0,"free_lv1_fall",!1),this.free_captain.setAnimation(0,"spawn",!1),this.free_captain.addAnimation(0,"idle",!0),d(this.ruber).to(.5,{scale:m(1.2,1.2,1.2)}).to(.5,{scale:m(1,1,1)}).start(),this.ruber.getChildByName("free").children.map((function(t){t.active=!1})),this.ruber.getChildByName("free").getChildByName("x1").active=!0,this.scheduleOnce((function(){t.ruber.getChildByName("free").getChildByName("x2").active=!0,t.scheduleOnce((function(){t.ruber.getChildByName("free").getChildByName("x3").active=!0,t.scheduleOnce((function(){t.ruber.getChildByName("free").getChildByName("x5").active=!0,t.scheduleOnce((function(){t.ruber.getChildByName("free").getChildByName("x2").active=!1,t.ruber.getChildByName("free").getChildByName("x3").active=!1,t.ruber.getChildByName("free").getChildByName("x5").active=!1,t.ruber.getChildByName("free").getChildByName("x2_off").active=!0,t.ruber.getChildByName("free").getChildByName("x3_off").active=!0,t.ruber.getChildByName("free").getChildByName("x5_off").active=!0}),.2)}),.2)}),.2)}),.2),this.scheduleOnce((function(){t.changeState(ei),t.free_captain.setAnimation(0,"idle",!0)}),1.5),this._freeCount>=1?(this.free_bottom.getChildByName("node_notLastOne").active=!0,this.free_bottom.getChildByName("node_lastOne").active=!1,this.free_bottom_time.string=N.numFormat(this._freeCount+"")):(this.free_bottom.getChildByName("node_notLastOne").active=!1,this.free_bottom.getChildByName("node_lastOne").active=!0),this.txt_winFree.reset(q.freeTotalWin)},a.onClickEnterNormalScreen=function(){var t=this;this._isFromAutoToFree=!1,G.instance.stopAllEffect(),this._audioId=0,this.free_winTxt.reset(q.freeTotalWin),q.freeTotalWin=0,this.scheduleOnce((function(){t.checkDownOrUpBet(),t.changeScene(!1,0,!0)}),1)},a.loadAni=function(t){if(t.Res&&t.Res.length>0)for(var e=t.Res[t.Res.length-1].PosMsg,i=[[Math.floor(9*Math.random()),e[0]-1,e[5]-1,e[10]-1,Math.floor(9*Math.random())],[Math.floor(9*Math.random()),e[1]-1,e[6]-1,e[11]-1,Math.floor(9*Math.random())],[Math.floor(9*Math.random()),e[2]-1,e[7]-1,e[12]-1,Math.floor(9*Math.random())],[Math.floor(9*Math.random()),e[3]-1,e[8]-1,e[13]-1,Math.floor(9*Math.random())],[Math.floor(9*Math.random()),e[4]-1,e[9]-1,e[14]-1,Math.floor(9*Math.random())]],n=0;n<this.turn_aniLines.length;n++)this.turn_aniLines[n].setData({index:n}),this.turn_aniLines[n].initCard(i[n]);else for(var o=0;o<this.turn_aniLines.length;o++)this.turn_aniLines[o].setData({index:o}),this.turn_aniLines[o].initCard()},a.clickStartGame=function(){if(this._auto)return this.setAuto(0),this.checkDownOrUpBet(),void(this.normal_btnBox.getChildByName("btn4").getComponent(p).opacity=255);this.preStart()},a.preStart=function(){if(this.clickHideWindow(),!this.freeLock&&this.checkReady()&&!this._lock){if(k.instance.getUserDataForKey(S.GOLD)<1*this._bet)return N.showTip(A.lang.fishTip.gold,f.isMobile),void this.setAuto(0);this._isFree||this.updateGoldData(1*-this._bet),this.clear(),H.palyAudio(H.audio.spinBtn),this.startGameAni(!0),this.sendBet(),this._state=ii,this._runTime=4665600000.5}},a.runStart=function(){var t=this;this.isWaitBet=!1,mi=this._auto||this._isFree?1.5:.2,this.setFreeCount(this._freeCount-1),this._freeCount<0&&(this._freeCount=0),this.checkAuto(),this.changeBtnActive(!1),this._scatteNum=0,this._state=ii,this._runTime=_i;for(var e=function(e){t.scheduleOnce((function(){t.turn_aniLines[e].run(0)}),t._runDelay*e)},i=0;i<this.turn_aniLines.length;i++)e(i);0==this._runDelay&&(this._runTime=.1)},a.onClickStop=function(){var t=this;if(q.result&&!this._lock){this._lock=!0,0==this._runDelay&&H.palyAudio(H.audio.spinReelQuickstop),this._state=ni,this._runTime=.5;var e=q.result.Res[0].PosMsg,i=.2;if(0==this._runDelay){for(var n=function(n){var o=e[n]-1,r=e[n+1*t.turn_aniLines.length]-1,a=e[n+2*t.turn_aniLines.length]-1,s=[o,r,a];8==o&&t._scatteNum++,8==r&&t._scatteNum++,8==a&&t._scatteNum++,t.scheduleOnce((function(){t.turn_aniLines[n].showResult(s,!1,0)}),i)},o=0;o<this.turn_aniLines.length;o++)n(o);this._runTime+=i;var r=q.result.prizeAmount;q.freeTotalWin+=this._isFree?r:0;this.scheduleOnce((function(){t.showResult()}),.5+i)}else{for(var a=[0,0,0,0,0],s=0,u=0;u<this.turn_aniLines.length;u++){var l=e[u]-1,h=e[u+1*this.turn_aniLines.length]-1,c=e[u+2*this.turn_aniLines.length]-1;8==l&&this._scatteNum++,8==h&&this._scatteNum++,8==c&&this._scatteNum++,a[u]=this._scatteNum,this._scatteNum>=2&&0!=this._runDelay&&i++}for(var _=function(i){var n=[e[i]-1,e[i+1*t.turn_aniLines.length]-1,e[i+2*t.turn_aniLines.length]-1];t.scheduleOnce((function(){t.turn_aniLines[i].showResult(n,!1,a[i])}),s),a[i]>=2&&s++},m=0;m<this.turn_aniLines.length;m++)_(m);this._runTime+=i;var d=q.result.prizeAmount;q.freeTotalWin+=this._isFree?d:0;this.scheduleOnce((function(){t.showResult()}),.5+i)}}},a.showResult=function(){q.result&&this.checkAward()},a.checkAward=function(){q.result.prizeAmount>0?this.changeState(oi):(this.startGameAni(!1),this.changeState(ui),this.changeBtnActive(!0),this.showEnd())},a.showEnd=function(){var t=this;if(this.updateGoldData(),this.changeBtnActive(!0),this._state=ui,this._scatteNum>1&&this._scatteNum<3&&!this._isFree?H.palyAudio(H.audio.fsNoWin):this._scatteNum>=3&&!this._isFree&&H.palyAudio(H.audio.freespinWon),q.result.FreeInfo.Count){if(this._isFree&&this._freeCount<q.result.FreeInfo.Count){for(var e=0;e<this.turn_aniLines.length;e++)this.turn_aniLines[e].showScatter();this.changeState(ci),this._lock=!1}else if(this._isFree)this._lock=!1;else{0==this._runDelay&&(this._hasChangeSpeed=!0,this._runDelay=.1);for(var i=0;i<this.turn_aniLines.length;i++)this.turn_aniLines[i].showScatter();this.scheduleOnce((function(){t.changeScene(!0,q.result.FreeInfo.Count),t._lock=!1}),1)}this._freeCount=q.result.FreeInfo.Count}else this._lock=!1,this._freeCount<=0&&this._isFree&&(this._hasChangeSpeed&&(this._hasChangeSpeed=!1,this._runDelay=0),this.scheduleOnce((function(){t.changeScene(!1),t.changeState(li)}),.5))},a.showNext=function(){var t=this;this._scatteNum>1&&(this.turn_bottomIntro.node.active=!0,this.turn_bottomIntro.setAnimation(0,"animation",!1),H.palyAudio(H.audio.fsGet),this.scheduleOnce((function(){t.turn_bottomIntro.node.active=!1}),1.5)),this.hideSpine(),this._showLineIndex=0,this.turn_node_spineMask.active=!1,this.getWinIconAnim(),this._resultIndex++,this.aniGun();var e=this._resultIndex,i=q.result.Res[e].PosMsg,n=null;this._scatteNum=0;for(var o=0;o<q.result.Res[this._resultIndex].PosMsg.length;o++)9==q.result.Res[this._resultIndex].PosMsg[o]&&this._scatteNum++;q.result.Res[e+1]&&(n=q.result.Res[e+1].PosMsg);for(var a=0;a<this.turn_aniLines.length;a++){var s=i[a]-1,u=i[a+1*this.turn_aniLines.length]-1,l=[i[a+2*this.turn_aniLines.length]-1,u,s],h=0;if(q.result.Res[e].RewardPos)for(var c,_=r(q.result.Res[e].RewardPos);!(c=_()).done;){var m=c.value;m!=a&&m!=a+1*this.turn_aniLines.length&&m!=a+2*this.turn_aniLines.length||h++}var d=null;if(n&&h>0)d=[n[a]-1,n[a+1*this.turn_aniLines.length]-1,n[a+2*this.turn_aniLines.length]-1][h-1];this.turn_aniLines[a].showNext(l,d)}this.scheduleOnce((function(){t.startGameAni(!1),t.showResult()}),.8)},a.showAward=function(){this._state==oi&&(this.txt_win.value=q.result.Res[this._resultIndex].RewardMoney,q.result.prizeAmount,q.result.prizeAmount&&(this.showLines(),this.showWin()))},a.showWin=function(){var t=this;this.notice_content.active=!1,this.notice_gain_one.active=!0,d(this.notice_gain_one).to(.01,{scale:m(.9,.9,1)}).to(.2,{scale:m(1.1,1.1,1)}).to(.1,{scale:m(1,1,1)}).start();var e=q.result.Res[this._resultIndex].RewardMoney;if(this._resultIndex>0&&e>0||e>0&&this._isFree){var i=this._resultIndex;i>3&&(i=3);var n=this._odds[i],o=e/n;this.notice_gain_one_txt.string=N.numberFormat(o/K.Constant.moneyRatio,2),this.notice_txt_odds.node.active=!0,this.notice_txt_odds.string="x"+n,this.notice_txt_odds.node.getComponent(p).opacity=0,this.notice_txt_odds.node.scale=m(1,1,1),H.palyAudio(H.audio.prizeWinMultiply),d(this.notice_txt_odds.node).to(.8,{scale:m(2,2,1)}).call((function(){t.notice_txt_odds.node.active=!1,H.palyAudio(H.audio.prizeWinStart),t.notice_gain_one_txt.string=N.numberFormat(e/K.Constant.moneyRatio,2)})).start(),d(this.notice_txt_odds.node.getComponent(p)).to(.8,{opacity:180}).start()}else e>0&&(H.palyAudio(H.audio.prizeWinStart),this.notice_gain_one_txt.string=N.numberFormat(e/K.Constant.moneyRatio,2));if(this._resultIndex<q.result.Res.length-1)return this.changeState(hi),this.notice_bg.setAnimation(0,"normal_win",!1),void this.notice_bg.addAnimation(0,"normal_idle",!0);this.scheduleOnce((function(){t.notice_gain_all.active=!0,t.notice_gain_one.active=!1,q.result.prizeAmount/t._bet<5?(H.palyAudio(H.audio.prizeTotalWin),t.txt_win.value=q.result.prizeAmount,t.notice_gain_all_txt.value=q.result.prizeAmount,t.txt_winFree.value=q.freeTotalWin):(t.txt_win.stepCount=60,t.txt_winFree.stepCount=60,H.palyAudio(H.audio.prizeMediumWinCounting),t.txt_win.value=q.result.prizeAmount,t.notice_gain_all_txt.value=q.result.prizeAmount,t.txt_winFree.value=q.freeTotalWin,t.scheduleOnce((function(){t.txt_win.stepCount=30,t.txt_winFree.stepCount=30,H.palyAudio(H.audio.prizeMediumWinCountingEnd)}),1)),q.result.prizeAmount/t._bet>=20?t.scheduleOnce((function(){t.changeState(ai)}),.3):t.changeState(si),t.initGun()}),e>0?.3:.2)},a.showSmoke=function(t){for(var e=this,i=function(i){e.turn_spine_smokes[t[i]].node.active=!0,e.turn_spine_smokes[t[i]].clearTrack(0),e.turn_spine_smokes[t[i]].setAnimation(0,"1",!1),e.turn_spine_smokes[t[i]].setCompleteListener((function(){e.turn_spine_smokes[t[i]].setCompleteListener(null),e.turn_spine_smokes[t[i]].node.active=!1})),e.turn_spine_smokes1[t[i]].node.active=!0,e.turn_spine_smokes1[t[i]].clearTrack(0),e.turn_spine_smokes1[t[i]].setAnimation(0,"1",!1),e.turn_spine_smokes1[t[i]].setCompleteListener((function(){e.turn_spine_smokes1[t[i]].setCompleteListener(null),e.turn_spine_smokes1[t[i]].node.active=!1}))},n=0;n<t.length;n++)i(n)},a.hideSpine=function(){for(var t,e=this.turn_node_spineParent.children,i=r(e);!(t=i()).done;){t.value.active=!1}for(var n,o=r(this.turn_aniLines);!(n=o()).done;){n.value.show()}},a.showSpine=function(t,e,i){void 0===i&&(i=!1);var n=this.turn_node_spineParent.getChildByName("spine"+t);n.active=!0;var o=n.getChildByName("item");o||(o=b(this.prefab_winItem),n.addChild(o),o.name="item");var r=o.getComponent(P);r.showResult(e,i);var a=Math.floor(t/5),s=t%5;return this.turn_aniLines[s].hide(a),r},a.hideBigWin=function(){this._state==ai&&(this._runTime=.5)},a.showLines=function(){var t=this,e=q.result.Res[this._resultIndex].RewardPos;if(!e||0==e.length)return!1;var i=q.result.Res[this._resultIndex].PosMsg;this.hideSpine();var n=e;H.palyAudio(H.audio.prizeWinStart);for(var o=0;o<n.length;o++){var r=n[o],a=i[r]-1;this.showSpine(r,a)}var s=q.result.Res[this._resultIndex].RewardLines,u=function(){var e=t.turn_node_line.getChildByName("line"+(parseInt(l)+1));if(e){e.active=!0;var i=e.getChildByName("line"),n=i.getComponent(U);i&&(n.hide(),n.action()),t.scheduleOnce((function(){e.active=!1}),1.25)}};for(var l in s)u();return!0},a.hideLines=function(){},a.setBet=function(t){q.betAmountIdx=t,q.setBet(),this.checkDownOrUpBet()},a.updateInfo=function(){var t=q.initInfo,e=q.betAmountList.length-1,i=e>=2?2:e;if(q.betAmountIdx=-1,t.BetAmount<=0)q.betAmountIdx=i;else{for(var n=0;n<q.betAmountList.length;n++)if(q.betAmountList[n]==t.BetAmount){q.betAmountIdx=n;break}-1==q.betAmountIdx&&(q.betAmountIdx=i)}this.updateSetData(),q.freeTotalWin=t.FreeInfo.TotalPrizeAmount,t.FreeInfo&&t.FreeInfo.Count>0?(this.changeScene(!0,t.FreeInfo.Count),this._odds=H.oddsType.free):(H.palyMusic(H.audio.bgmMg),this.changeScene(!1),this._odds=H.oddsType.normal),this.loadAni(t)},a.initEvent=function(){var t=this;q.on(Q.SELECT_BET,(function(e){t.updateSetData(),y.stopAllByTarget(t.txt_bet.node),d(t.txt_bet.node).to(.1,{scale:m(1.2,1.2,1)}).to(.1,{scale:m(1,1,1)}).start()}),this),q.on(Q.START,(function(e){t.runStart()}),this),q.on(Q.SHOW_LIGHT,(function(e){t.turn_aniLines[e.index]&&(0==t._runDelay||t.turn_aniLines[e.index].getLightStatue()||(H.palyAudio(H.audio.fsStart),t.turn_aniLines[e.index].showLight()))}),this),q.on(Q.SHOW_SMOKE,(function(){var e=q.result.Res[t._resultIndex-1]?q.result.Res[t._resultIndex-1].RewardPos:null,i=[];if(e){var n=[[],[],[],[],[]];e.map((function(t){n[t%5].push(t)})),n.map((function(t){t.length>0&&(t.sort(),i.push(t[t.length-1]))}))}t.scheduleOnce((function(){t.showSmoke(i)}),.3)}),this),q.on(Q.CLICK_ITEM,(function(e){if(!t._isFree&&!t._auto&&!t._lock){t._window.node.scale=m(1,1,1),t._window.node.active=!0,t._window.showIndex(e.index,e.col),t.turn_node_spineMask.active=!0;var i=e.pos;i=t.node.getComponent(v).convertToNodeSpaceAR(i),t._window.node.setPosition(i.x,i.y)}}),this),Je.on(je.eventTransform.setBet,this.setBet,this),Je.on(je.eventTransform.setAuto,this.setAuto,this),Je.on(je.eventTransform.setQuick,this.clickChangeQuick,this),Je.on(je.eventTransform.scrollNumberEvent,this.bigWinEnd,this),Je.on(je.eventTransform.disConnect,this.onDisconnect,this),Je.on(je.protocolHall.login,this.onReconnectSuccess,this),Je.on(je.protocolHall.getWallet,this.onBalanceUpdate,this),Je.on(je.protocolHall.pushWallet,this.onBalanceUpdate,this)},a.onBalanceUpdate=function(t){k.instance.setUserDataForKey(S.GOLD,t.Wallet.VndBalance)},a.onDisconnect=function(){N.showNetTips()},a.onReconnectSuccess=function(){N.closeNetTips(),this.isWaitBet&&this.sendBet()},a.bigWinEnd=function(){this.bigwin_bg.active&&!this._isEndBigWin&&q.result.prizeAmount-200<=this.bigwin_txt.value&&this.bigwin_txt.value<=q.result.prizeAmount+200&&(G.instance.stopSound(this._audioId),this._isEndBigWin=!0,this._runTime=8,H.palyAudio(H.audio.bgmBigwinEnd))},a.initGun=function(){var t=this;this._isFree?(this.ruberBg.setAnimation(0,"free_lv1_fall",!1),this.scheduleOnce((function(){t.ruber.getChildByName("free").children.map((function(t){t.active=!1})),t.ruber.getChildByName("free").getChildByName("x1").active=!0,t.ruber.getChildByName("free").getChildByName("x2_off").active=!0,t.ruber.getChildByName("free").getChildByName("x3_off").active=!0,t.ruber.getChildByName("free").getChildByName("x5_off").active=!0,t.ruberBg.setAnimation(0,"free_lv1_light",!1)}),.2)):(this.ruberBg.setAnimation(0,"normal_lv1_fall",!1),this.scheduleOnce((function(){t.ruber.getChildByName("normal").children.map((function(t){t.active=!1})),t.ruber.getChildByName("normal").getChildByName("x1").active=!0,t.ruber.getChildByName("normal").getChildByName("x2_off").active=!0,t.ruber.getChildByName("normal").getChildByName("x3_off").active=!0,t.ruber.getChildByName("normal").getChildByName("x5_off").active=!0,t.ruberBg.setAnimation(0,"normal_lv1_light",!1)}),.2))},a.aniGun=function(){var t=this;H.palyAudio(H.audio.woodenWheel),this._isFree?(1==this._resultIndex||2==this._resultIndex?H.palyAudio(H.audio.voxBonusSmall01):3==this._resultIndex?H.palyAudio(H.audio.voxBonusBig01):H.palyAudio(H.audio.voxBonusBig02),this.free_captain.setAnimation(0,"win1",!1),this.free_captain.addAnimation(0,"idle",!0)):(1==this._resultIndex?H.palyAudio(H.audio.voxMgSmall01):2==this._resultIndex?H.palyAudio(H.audio.voxMgSmall02):3==this._resultIndex?H.palyAudio(H.audio.voxMgBig01):H.palyAudio(H.audio.voxMgBig02),this.captain.setAnimation(0,"win1",!1),this.captain.addAnimation(0,"idle",!0)),this.scheduleOnce((function(){t._isFree?(t.ruber.getChildByName("free").children.map((function(t){t.active=!1})),1==t._resultIndex?(t.ruberBg.setAnimation(0,"free_lv2_up",!1),H.palyAudio(H.audio.LevelUp1),t.scheduleOnce((function(){t.ruberBg.setAnimation(0,"free_lv2_light",!1),t.ruber.getChildByName("free").getChildByName("x1_off").active=!0,t.ruber.getChildByName("free").getChildByName("x2").active=!0,t.ruber.getChildByName("free").getChildByName("x3_off").active=!0,t.ruber.getChildByName("free").getChildByName("x5_off").active=!0}),.2)):2==t._resultIndex?(t.ruberBg.setAnimation(0,"free_lv3_up",!1),H.palyAudio(H.audio.LevelUp2),t.scheduleOnce((function(){t.ruberBg.setAnimation(0,"free_lv3_light",!1),t.ruber.getChildByName("free").getChildByName("x1_off").active=!0,t.ruber.getChildByName("free").getChildByName("x2_off").active=!0,t.ruber.getChildByName("free").getChildByName("x3").active=!0,t.ruber.getChildByName("free").getChildByName("x5_off").active=!0}),.2)):(H.palyAudio(H.audio.LevelUp3),t.ruberBg.setAnimation(0,"free_lv4_up",!1),t.scheduleOnce((function(){t.ruberBg.setAnimation(0,"free_lv4_light",!1),t.ruber.getChildByName("free").getChildByName("x1_off").active=!0,t.ruber.getChildByName("free").getChildByName("x2_off").active=!0,t.ruber.getChildByName("free").getChildByName("x3_off").active=!0,t.ruber.getChildByName("free").getChildByName("x5").active=!0}),.2))):(t.ruber.getChildByName("normal").children.map((function(t){t.active=!1})),1==t._resultIndex?(t.ruberBg.setAnimation(0,"normal_lv2_up",!1),H.palyAudio(H.audio.LevelUp1),t.scheduleOnce((function(){t.ruberBg.setAnimation(0,"normal_lv2_light",!1),t.ruber.getChildByName("normal").getChildByName("x1_off").active=!0,t.ruber.getChildByName("normal").getChildByName("x2").active=!0,t.ruber.getChildByName("normal").getChildByName("x3_off").active=!0,t.ruber.getChildByName("normal").getChildByName("x5_off").active=!0}),.2)):2==t._resultIndex?(t.ruberBg.setAnimation(0,"normal_lv3_up",!1),H.palyAudio(H.audio.LevelUp2),t.scheduleOnce((function(){t.ruberBg.setAnimation(0,"normal_lv3_light",!1),t.ruber.getChildByName("normal").getChildByName("x1_off").active=!0,t.ruber.getChildByName("normal").getChildByName("x2_off").active=!0,t.ruber.getChildByName("normal").getChildByName("x3").active=!0,t.ruber.getChildByName("normal").getChildByName("x5_off").active=!0}),.2)):(t.ruberBg.setAnimation(0,"normal_lv4_up",!1),H.palyAudio(H.audio.LevelUp3),t.scheduleOnce((function(){t.ruberBg.setAnimation(0,"normal_lv4_light",!1),t.ruber.getChildByName("normal").getChildByName("x1_off").active=!0,t.ruber.getChildByName("normal").getChildByName("x2_off").active=!0,t.ruber.getChildByName("normal").getChildByName("x3_off").active=!0,t.ruber.getChildByName("normal").getChildByName("x5").active=!0}),.2)))}),0)},a.clear=function(){this.unscheduleAllCallbacks(),this.txt_win.reset(),q.result=null,this.hideLines(),this.hideSpine(),this._showLineIndex=0,this.turn_node_spineMask.active=!1,this.notice_content.active=!0,this.notice_gain_all.active=!1,this.notice_gain_one.active=!1,this.notice_gain_all_txt.reset(),this.notice_bg.setAnimation(0,"normal_idle",!0),this._resultIndex=0},a.sendBet=function(){this.isWaitBet=!0,O.instance.sendOnlineData(je.ProtocolSlotCaptain.bet,{betAmount:this._bet})},a.changeBtnActive=function(t){this._auto||(t?(this.checkDownOrUpBet(),this.normal_btnBox.getChildByName("btn4").getComponent(p).opacity=255):(this.normal_btnBox.getChildByName("btn2").getComponent(p).opacity=100,this.normal_btnBox.getChildByName("btn3").getComponent(p).opacity=100,this.normal_btnBox.getChildByName("btn4").getComponent(p).opacity=100),t?(this.txt_bet.color=C().fromHEX("#86DCFF"),this.txt_gold.color=C().fromHEX("#86DCFF"),this.txt_win.getComponent(c).color=C().fromHEX("#86DCFF")):(this.txt_bet.color=w.WHITE,this.txt_gold.color=w.WHITE,this.txt_win.getComponent(c).color=w.WHITE))},a.startGameAni=function(t){var e=this;this._auto||this._isFree||(t?(this.turn_spine_start.setAnimation(0,"star",!1),this.scheduleOnce((function(){q.result&&(q.result.prizeAmount>0?e.turn_spine_start.addAnimation(0,"stop",!0):e.turn_spine_start.addAnimation(0,"idle",!0))}),.6)):this.scheduleOnce((function(){e.turn_spine_start.setAnimation(0,"idle",!0)}),mi+.1))},a.updateNotice=function(t){this._noticeDelay-=t,this._noticeDelay<0&&this.notice_title.setPosition(this.notice_title.position.x-1.5,this.notice_title.position.y),this.notice_title.getPosition().x<-this.notice_title.getComponent(v).width/2-233&&this.changeNotice()},a.changeNotice=function(){this._noticeDelay=2,this._noticeIndex++,this._noticeIndex>=5&&(this._noticeIndex=0),this.notice_title.getComponent(V).key="info_"+(this._noticeIndex+1);var t=this.notice_title.getComponent(v).width/2>233?this.notice_title.getComponent(v).width/2-233:0;this.notice_title.setPosition(t,this.notice_title.position.y)},a.clickHideWindow=function(){this.turn_node_spineMask.active=!1,this._window.onClick()},a.updateGoldData=function(t){void 0===t&&(t=0),this.txt_gold.string=N.moneyFormat(parseInt(k.instance.getUserDataForKey(S.GOLD)+t))+"",this.txt_goldFree.string=N.moneyFormat(parseInt(k.instance.getUserDataForKey(S.GOLD)+t))+""},a.updateSetData=function(){this._bet=q.getBet(),this.txt_bet.string=N.moneyFormat(this._bet),this.txt_betFree.string=N.moneyFormat(this._bet)},a.clickChangeQuick=function(){0==this._runDelay?(this._runDelay=.1,this.spine_quick.setAnimation(0,"off",!0)):(this._runDelay=0,this.spine_quick.setAnimation(0,"intro_on",!1),this.spine_quick.addAnimation(0,"on",!0))},a.clickDownBet=function(){0!=q.betAmountIdx&&(this._auto||this.checkReady()&&(q.betAmountIdx--,q.betAmountIdx<0&&(q.betAmountIdx=0),q.setBet(),this.checkDownOrUpBet()))},a.clickUpBet=function(){q.betAmountIdx!=q.betAmountList.length-1&&(this._auto||this.checkReady()&&(q.betAmountIdx++,q.betAmountIdx>q.betAmountList.length-1&&(q.betAmountIdx=q.betAmountList.length-1),q.setBet(),this.checkDownOrUpBet()))},a.checkDownOrUpBet=function(){this.normal_btnBox.getChildByName("btn2").getComponent(p).opacity=0==q.betAmountIdx?100:255,this.normal_btnBox.getChildByName("btn3").getComponent(p).opacity=q.betAmountIdx==q.betAmountList.length-1?100:255},a.clickShowAutoBet=function(t){var e=this;this._auto||this._lock||(t.isChecked?t.isChecked=!1:(t.isChecked=!0,N.loadPopPublic("prefab/fortuneCommon/FortuneSetAuto",(function(){}),(function(t){var i=b(t);T.instance.popNodeView(i,!0),i.getComponent(W).setData({gold:parseInt(k.instance.getUserDataForKey(S.GOLD)),bet:e._bet,win:0})}),!1)))},a.setAuto=function(t){this._autoTimes=t,this.turn_auto_leftCount.string=""+this._autoTimes,t>0?(this._auto=!0,this.turn_spine_start.setAnimation(0,"auto",!0),this.txt_bet.color=C().fromHEX("#86DCFF"),this.txt_gold.color=C().fromHEX("#86DCFF"),this.txt_win.getComponent(c).color=C().fromHEX("#86DCFF")):(this._auto=!1,this.turn_spine_start.setAnimation(0,"idle",!0),this.txt_bet.color=w.WHITE,this.txt_gold.color=w.WHITE,this.txt_win.getComponent(c).color=w.WHITE),this.turn_auto_leftCount.node.active=this._auto,this._state==ri&&this._auto&&this.changeState(ei)},a.checkAuto=function(){this._isFree||this.freeLock||(this._auto?(this.normal_btnBox.getChildByName("btn2").getComponent(p).opacity=100,this.normal_btnBox.getChildByName("btn3").getComponent(p).opacity=100,this.normal_btnBox.getChildByName("btn4").getComponent(p).opacity=100,this._autoTimes--,this.turn_auto_leftCount.string=""+this._autoTimes,this._autoTimes<=0&&this.setAuto(0)):(this.checkDownOrUpBet(),this.normal_btnBox.getChildByName("btn4").getComponent(p).opacity=255))},a.clickShowBet=function(){this._auto||this.checkReady()&&N.loadPopPublic("prefab/fortuneCommon/FortuneSetBase",(function(){}),(function(t){var e=b(t);T.instance.popNodeView(e,!0),e.getComponent(z).setData({betSizeList:q.betSizeList,betLevelList:q.betLevelList,betLinesList:q.betLinesList,betAmountList:q.betAmountList,betAmountInfoList:q.betAmountInfoList,betAmountIdx:q.betAmountIdx})}),!1)},a.clickShowRule=function(){N.loadPopBuddle("prefab/CaptainHelp",q.bundle,(function(){}),(function(t){var e=b(t);T.instance.popNodeView(e,!0)}),!0)},a.clickShowHistory=function(){this._auto||this.checkReady()&&N.loadPopPublic("prefab/fortuneCommon/FortuneHistory",(function(){}),(function(t){var e=b(t);T.instance.popNodeView(e,!0),e.getComponent(M).setGameType("slotCaptainBounty")}),!1)},a.clickShowRank=function(){N.loadPopPublic("prefab/fortuneCommon/FortuneRank",(function(){}),(function(t){var e=b(t);T.instance.popNodeView(e,!0),e.getComponent(D).send("slotCaptainBounty")}),!1)},a.clickBottomShowMoreBtn=function(){var t=this,e=.15,i=this.startBtn.getComponent(p);y.stopAllByTarget(i),d(i).to(e,{opacity:0}).call((function(){t.startBtn.active=!1})).start(),this.more_btnBox.active=!0,y.stopAllByTarget(this.more_btnBox),d(this.more_btnBox).to(e,{position:this.moreBtnBoxPos}).start();var n=this.more_btnBox.getComponent(p);y.stopAllByTarget(n),d(n).to(e,{opacity:255}).start(),y.stopAllByTarget(this.normal_btnBox),d(this.normal_btnBox).to(e,{position:m(this.normalBtnBoxPos.x,this.normalBtnBoxPos.y-this.bottomBtnMoveDis,this.normalBtnBoxPos.z)}).call((function(){t.normal_btnBox.active=!1})).start();var o=this.normal_btnBox.getComponent(p);y.stopAllByTarget(o),d(o).to(e,{opacity:0}).start()},a.clickBottomHideMoreBtn=function(){var t=this,e=.15;this.startBtn.active=!0;var i=this.startBtn.getComponent(p);y.stopAllByTarget(i),d(i).to(e,{opacity:255}).start(),y.stopAllByTarget(this.more_btnBox),d(this.more_btnBox).to(e,{position:m(this.moreBtnBoxPos.x,this.moreBtnBoxPos.y-this.bottomBtnMoveDis,this.moreBtnBoxPos.z)}).call((function(){t.more_btnBox.active=!1})).start();var n=this.more_btnBox.getComponent(p);y.stopAllByTarget(n),d(n).to(e,{opacity:0}).start(),this.normal_btnBox.active=!0,y.stopAllByTarget(this.normal_btnBox),d(this.normal_btnBox).to(e,{position:this.normalBtnBoxPos}).start();var o=this.normal_btnBox.getComponent(p);y.stopAllByTarget(o),d(o).to(e,{opacity:255}).start()},a.clickSoundBtn=function(){var t=this.getVolume();t=t>0?0:1,G.instance.setVolume(t),f.localStorage.setItem("volume",t),this.updateButtonSound()},a.onDestroy=function(){I.close(this),Je.off(je.eventTransform.setBet,this.setBet,this),Je.off(je.eventTransform.setAuto,this.setAuto,this),Je.off(je.eventTransform.setQuick,this.clickChangeQuick,this),Je.off(je.eventTransform.scrollNumberEvent,this.bigWinEnd,this)},e}(x)).prototype,"normal_btnBox",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zt=e(jt.prototype,"more_btnBox",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$t=e(jt.prototype,"prefab_winItem",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=e(jt.prototype,"captain",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=e(jt.prototype,"ruber",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=e(jt.prototype,"ruberBg",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=e(jt.prototype,"txt_bet",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=e(jt.prototype,"txt_win",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=e(jt.prototype,"txt_gold",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=e(jt.prototype,"notice_content",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=e(jt.prototype,"notice_title",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=e(jt.prototype,"notice_gain_one",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=e(jt.prototype,"notice_gain_one_txt",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=e(jt.prototype,"notice_gain_all",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=e(jt.prototype,"notice_gain_all_txt",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=e(jt.prototype,"notice_txt_odds",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=e(jt.prototype,"notice_bg",[_t],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=e(jt.prototype,"turn_bg_list",[mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fe=e(jt.prototype,"turn_bg",[dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=e(jt.prototype,"turn_prefab_window",[ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=e(jt.prototype,"turn_node_line",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=e(jt.prototype,"turn_aniLines",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ye=e(jt.prototype,"turn_node_spineParent",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Be=e(jt.prototype,"turn_node_spineMask",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=e(jt.prototype,"turn_spine_start",[Bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=e(jt.prototype,"turn_spine_smokes",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),we=e(jt.prototype,"turn_spine_smokes1",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),xe=e(jt.prototype,"turn_auto_leftCount",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=e(jt.prototype,"turn_bottomIntro",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=e(jt.prototype,"bigwin_bg",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=e(jt.prototype,"bigwin_sp",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=e(jt.prototype,"bigwin_txt",[Tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=e(jt.prototype,"free_start",[Lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=e(jt.prototype,"free_start_intro",[kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=e(jt.prototype,"free_start_time",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=e(jt.prototype,"free_win",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=e(jt.prototype,"free_win_intro",[Ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=e(jt.prototype,"free_winTxt",[zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=e(jt.prototype,"free_winBtn",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),We=e(jt.prototype,"free_bottom",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=e(jt.prototype,"free_bottom_introl",[Wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=e(jt.prototype,"free_bottom_time",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=e(jt.prototype,"txt_betFree",[Et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=e(jt.prototype,"txt_winFree",[Rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),He=e(jt.prototype,"txt_goldFree",[Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=e(jt.prototype,"free_bg",[Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=e(jt.prototype,"free_bg1",[Ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ve=e(jt.prototype,"free_captain",[Gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ke=e(jt.prototype,"free_add",[Vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qe=e(jt.prototype,"free_add_time",[Kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qe=e(jt.prototype,"spine_quick",[qt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xe=e(jt.prototype,"startBtn",[Qt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ye=e(jt.prototype,"button_sound",[Xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yt=jt))||Yt)||Yt));a._RF.pop()}}}));

System.register("chunks:///_virtual/CaptainWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CaptainDef.ts"],(function(t){var e,n,i,o,r,a,l,s,c,u,d,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.UITransform,s=t.sp,c=t.Label,u=t.Node,d=t.v3,p=t.Component},function(t){f=t.CaptainDef}],execute:function(){var b,h,_,m,v,w,g,y,C,z,D,P,k,x,F,L,N,T;r._RF.push({},"8cc5cv8P5xFlJLlFiFJNZtF","CaptainWindow",void 0);var W=a.ccclass,A=a.property,I=a.menu;t("default",(b=W("CaptainWindow"),h=I("game/Captain/CaptainWindow"),_=A(l),m=A(s.Skeleton),v=A(s.SkeletonData),w=A(c),g=A(u),y=A(u),C=A(u),b(z=h((P=e((D=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"bg",P,o(e)),i(e,"spine_normal",k,o(e)),i(e,"spines",x,o(e)),i(e,"txt_odds",F,o(e)),i(e,"node_odd",L,o(e)),i(e,"node_wild",N,o(e)),i(e,"node_scatter",T,o(e)),e}n(e,t);var r=e.prototype;return r.start=function(){var t=this;this.node.on(u.EventType.TOUCH_END,(function(){t.onClick()}))},r.showIndex=function(t,e){this.node_odd.active=t<7,this.node_wild.active=7==t,this.node_scatter.active=8==t;var n=f.odds[t];if(n)for(var i=0;i<3;i++)this.txt_odds[i].string=n[i]+"";this.spine_normal.skeletonData=this.spines[t],this.spine_normal.node.active=!0,7==t||8==t?this.spine_normal.setAnimation(0,"idle",!0):this.spine_normal.setAnimation(0,"<None>",!1);var o=t<7?310:460;this.bg.width=o;var r,a=t<7?70:140,l=225;e<=2?r=77:(a=-a,r=-220,l=-l),this.bg.node.setPosition(d(a)),this.node_odd.setPosition(d(r)),this.node_wild.setPosition(d(l)),this.node_scatter.setPosition(d(l))},r.onClick=function(){this.node.active=!1},e}(p)).prototype,"bg",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(D.prototype,"spine_normal",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(D.prototype,"spines",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=e(D.prototype,"txt_odds",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=e(D.prototype,"node_odd",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(D.prototype,"node_wild",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(D.prototype,"node_scatter",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=D))||z)||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/CaptainWinItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CaptainProxy.ts"],(function(n){var e,i,t,o,a,r,s,p,l,c,u,m;return{setters:[function(n){e=n.applyDecoratedDescriptor,i=n.inheritsLoose,t=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,s=n.sp,p=n.UITransform,l=n.v3,c=n.Component},function(n){u=n.default,m=n.CaptainGameEvent}],execute:function(){var f,d,h,_,b,g,v,C,y,w;a._RF.push({},"cec796lvcdDDK39aL5wFOpk","CaptainWinItem",void 0);var I=r.ccclass,k=r.property,D=r.menu;n("default",(f=I("CaptainWinItem"),d=D("game/Captain/CaptainWinItem"),h=k(s.Skeleton),_=k(s.Skeleton),b=k(s.SkeletonData),f(g=d((C=e((v=function(n){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a))||this,t(e,"spine_bg",C,o(e)),t(e,"spine_normal",y,o(e)),t(e,"spines",w,o(e)),e._index=void 0,e}i(e,n);var a=e.prototype;return a.onLoad=function(){},a.showResult=function(n,e){this._index=n,this.spine_normal.node.active=!0,this.spine_normal.skeletonData=this.spines[n],this.spine_bg.addAnimation(0,"idle",!0),this.spine_normal.setAnimation(0,"win",!0),this.showSpawn()},a.showSpawn=function(){var n=this;this.scheduleOnce((function(){n.spine_bg.setAnimation(0,"intro",!1),n.spine_bg.setCompleteListener((function(){n.spine_bg.setCompleteListener(null),n.spine_normal.node.active=!1,n.spine_bg.setAnimation(0,"end",!1)}))}),.3)},a.onClick=function(){u.emit(m.CLICK_ITEM,{index:this._index,pos:this.node.getComponent(p).convertToWorldSpaceAR(l(0,0))})},e}(c)).prototype,"spine_bg",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(v.prototype,"spine_normal",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(v.prototype,"spines",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=v))||g)||g));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/CaptainGame', 'chunks:///_virtual/CaptainGame'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});